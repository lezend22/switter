(this.webpackJsonpswitter=this.webpackJsonpswitter||[]).push([[0],{53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(3),r=n.n(c),s=n(35),i=n.n(s),u=n(27),o=n(10),l=n(24),j=n(9),b=n(13),d=n.n(b),p=n(18),f=n(23);n(46);f.a.initializeApp({apiKey:"AIzaSyCnIepEsSuEFmY_3xvcHfjJuMBoFA7krpg",authDomain:"switter-c635a.firebaseapp.com",projectId:"switter-c635a",storageBucket:"switter-c635a.appspot.com",messagingSenderId:"522850651854",appId:"1:522850651854:web:69c6881b5d56844e6a8a9f"});var h=f.a,O=f.a.auth(),x=f.a.firestore(),m=f.a.storage(),g=n(14),v=n(25),w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],j=Object(c.useState)(!0),b=Object(o.a)(j,2),f=b[0],x=b[1],m=Object(c.useState)(""),w=Object(o.a)(m,2),y=w[0],N=w[1],S=function(e){var t=e.target,n=t.name,a=t.value;"useremail"===n?r(a):"userPassword"===n&&l(a)},k=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=7;break}return e.next=5,O.createUserWithEmailAndPassword(n,u);case 5:e.next=9;break;case 7:return e.next=9,O.signInWithEmailAndPassword(n,u);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),N(e.t0.message),console.log("check out auth");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new h.auth.GoogleAuthProvider:"github"===n&&(a=new h.auth.GithubAuthProvider),e.next=4,O.signInWithPopup(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"authContainer",children:[Object(a.jsx)(g.a,{icon:v.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(a.jsxs)("form",{onSubmit:k,className:"container",children:[Object(a.jsx)("input",{type:"text",name:"useremail",placeholder:"Email",required:!0,value:n,onChange:S,className:"authInput"}),Object(a.jsx)("input",{type:"password",name:"userPassword",placeholder:"Password",required:!0,value:u,className:"authInput",onChange:S}),Object(a.jsx)("input",{type:"submit",className:"authInput authSubmit",value:f?"Create Account":"Log in"}),y&&Object(a.jsx)("span",{className:"authError",children:y})]}),Object(a.jsxs)("span",{onClick:function(){x((function(e){return!e}))},className:"authSwitch",children:[f?"Sign in":"Create Account",console.log(f)]}),Object(a.jsxs)("div",{className:"authBtns",children:[Object(a.jsxs)("button",{onClick:I,name:"google",className:"authBtn",children:["Continue with Google ",Object(a.jsx)(g.a,{icon:v.b})]}),Object(a.jsxs)("button",{onClick:I,name:"github",className:"authBtn",children:["Continue with Github ",Object(a.jsx)(g.a,{icon:v.a})]})]})]})},y=n(19),N=function(e){var t=e.sweetObj,n=e.check,r=Object(c.useState)(!1),s=Object(o.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)(t.text),j=Object(o.a)(l,2),b=j[0],f=j[1],h=function(){return u((function(e){return!e}))},O=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure want to Delete it?")){e.next=6;break}return e.next=4,x.doc("sweet/".concat(t.id)).delete();case 4:return e.next=6,m.refFromURL(t.attachmenturl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.doc("sweet/".concat(t.id)).update({text:b});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"nweet",children:i?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{onSubmit:v,className:"container nweetEdit",children:[Object(a.jsx)("input",{type:"text",placeholder:"Edit your sweet!",value:b,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;f(t)},className:"formInput"}),Object(a.jsx)("input",{type:"submit",value:"Update",className:"formBtn"})]}),Object(a.jsx)("span",{onClick:h,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{children:t.text}),t.attachmenturl&&Object(a.jsx)("img",{src:t.attachmenturl}),n&&Object(a.jsxs)("div",{className:"nweet__actions",children:[Object(a.jsx)("span",{onClick:O,children:Object(a.jsx)(g.a,{icon:y.d})}),Object(a.jsx)("span",{onClick:h,children:Object(a.jsx)(g.a,{icon:y.a})})]})]})})},S=n(56),k=function(e){var t=e.userObj,n=Object(c.useState)(""),r=Object(o.a)(n,2),s=r[0],i=r[1],l=Object(c.useState)([]),j=Object(o.a)(l,2),b=j[0],f=j[1],h=Object(c.useState)(null),O=Object(o.a)(h,2),v=O[0],w=O[1];Object(c.useEffect)((function(){x.collection("sweet").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));f(t),console.log("getsweet")})),console.log("homeeffect")}),[]);var k=function(){var e=Object(p.a)(d.a.mark((function e(n){var a,c,r,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==s){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),a="",null===v){e.next=12;break}return c=m.ref().child("".concat(t.uid,"/").concat(Object(S.a)())),e.next=8,c.putString(v,"data_url");case 8:return r=e.sent,e.next=11,r.ref.getDownloadURL();case 11:a=e.sent;case 12:return u={text:s,createdAt:Date.now(),createdId:t.uid,attachmenturl:a},e.next=15,x.collection("sweet").add(u);case 15:i(""),w("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("form",{onSubmit:k,className:"factoryForm",children:[Object(a.jsxs)("div",{className:"factoryInput__container",children:[Object(a.jsx)("input",{className:"factoryInput__input",value:s,onChange:function(e){var t=e.target.value;i(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(a.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),Object(a.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(a.jsx)("span",{children:"Add photos"}),Object(a.jsx)(g.a,{icon:y.b})]}),Object(a.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files;if(0!==t.length){var n=t[0],a=new FileReader;a.readAsDataURL(n),a.onloadend=function(e){var t=e.currentTarget.result;w(t)}}},style:{opacity:0}}),v&&Object(a.jsxs)("div",{className:"factoryForm__attachment",children:[Object(a.jsx)("img",{src:v,style:{backgroundImage:v}}),Object(a.jsxs)("div",{className:"factoryForm__clear",onClick:function(e){w("")},children:[Object(a.jsx)("span",{children:"Remove"}),Object(a.jsx)(g.a,{icon:y.c})]})]})]}),Object(a.jsx)("div",{style:{marginTop:30},children:b.map((function(e){return Object(a.jsx)(N,{sweetObj:e,check:e.createdId===t.uid},e.id)}))})]})},I=function(e){var t=e.refreshUser,n=e.userObj,r=Object(c.useState)([]),s=Object(o.a)(r,2),i=(s[0],s[1],Object(c.useState)(!1)),u=Object(o.a)(i,2),l=(u[0],u[1]),b=Object(c.useState)(n.displayName),f=Object(o.a)(b,2),h=f[0],x=f[1],m=Object(j.f)(),g=function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),h===n.displayName){e.next=6;break}return e.next=4,n.updateProfile({displayName:h}).then((function(){return window.alert("Profile update Successfully!")}));case 4:l(!1),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){console.log("profileEffect")}),[]),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("form",{onSubmit:g,className:"profileForm",children:[Object(a.jsx)("input",{type:"text",placeholder:"Change Display Name",value:h,autoFocus:!0,onChange:function(e){var t=e.target.value;x(t)},className:"formInput"}),Object(a.jsx)("input",{type:"submit",value:"Update Name",className:"formBtn",style:{marginTop:10}})]}),Object(a.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(e){O.signOut(),m.push("/")},children:"Log Out"})]})},C=function(e){e.userObj;return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:"/",style:{marginRight:10},children:Object(a.jsx)(g.a,{icon:v.c,color:"#04AAFF",size:"2x"})})}),Object(a.jsx)("li",{children:Object(a.jsxs)(l.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(a.jsx)(g.a,{icon:y.e,color:"#04AAFF",size:"2x"}),Object(a.jsx)("span",{style:{marginTop:10},children:"Profile"})]})})]})})},A=function(e){var t=e.refreshUser,n=e.IsLoggedIn,c=e.userObj;return Object(a.jsxs)(l.a,{children:[n&&Object(a.jsx)(C,{userObj:c}),Object(a.jsx)(j.c,{children:n?Object(a.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(a.jsx)(j.a,{exact:!0,path:"/",children:Object(a.jsx)(k,{userObj:c})}),Object(a.jsx)(j.a,{exact:!0,path:"/profile",children:Object(a.jsx)(I,{userObj:c,refreshUser:t})})]}):Object(a.jsx)(j.a,{exact:!0,path:"/",children:Object(a.jsx)(w,{})})})]})};var F=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(O.currentUser),i=Object(o.a)(s,2),l=i[0],j=i[1],b=Object(c.useState)(null),d=Object(o.a)(b,2),p=d[0],f=d[1];return Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){e?(j(!0),f(e)):j(!1),r(!0)}))})),Object(a.jsxs)(a.Fragment,{children:[n?Object(a.jsx)(A,{refreshUser:function(){f(Object(u.a)({},O.currentUser))},IsLoggedIn:l,userObj:p}):"Initializing,,,",Object(a.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Switter"]})]})};n(53);i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(F,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.cb20acf9.chunk.js.map